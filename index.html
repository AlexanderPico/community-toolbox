<!DOCTYPE html>

<html>

  <head>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="content-type" content="text/html; charset=UTF8">

    <title>Community toolbox</title>

    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="node_modules/chart.js/dist/Chart.js"></script>
    <script src="node_modules/urlhash/urlHash.js"></script>
    <script src="dist/community-toolbox.js" charset="utf-8"></script>

  </head>

  <body>

    <link href="node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="node_modules/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="examples/demo.css">

    <div class="container-fluid">

      <header class="text-center">
        <h1>Cytoscape Developer Community</h1>
      </header>

      <hr />

      <h4 style="text-align:center;font-weight:bold;">Join the open source community developing Cytoscape</h4>

      <hr />

      <div class="row">
	<ul>
		<li>If you're new, and looking to get involved, you're in the right place. Also check out <a href="https://github.com/cytoscape/cytoscape/wiki">our developer wiki</a>.</li>

          <li>If you're new to GitHub, using branches, or opening pull requests, <a href="https://guides.github.com/activities/hello-world/">read here for an introduction</a>.</li>

	  <li>If you have trouble, check out <a href="http://groups.google.com/group/cytoscape-app-dev">our developer forum</a> to ask for help.</li>
	</ul>

	<hr />
	<h3>Sections</h3>
	<ol>
		<li><a href="#first">Good first issues</a></li>
		<li><a href="#all">All issues</a></li>
		<li><a href="#triage">Issues to triage</a></li>
		<li><a href="#contributors">Contributors</a></li>
	</ol>
      </div>

      <hr />

      <h2 id="first">Good first issues</h2>

      <p>Here are a selection of issues we've marked especially for new and part-time contributors. We're here to help, so just ask if one looks interesting, by leaving a comment!</p>

      <div class="row good-first-issue"></div>

      <p>No issues left? Feel free to check other lists, open new issues or check in on <a href="http://groups.google.com/group/cytoscape-app-dev">our developer forum</a>.</p>

      <h2 id="all">All issues</h2>

      <div class="row all-issues"></div>

      <p>No issues left? Feel free to check other lists, open new issues or check in on <a href="http://groups.google.com/group/cytoscape-app-dev">our developer forum</a>.</p>

      <h2 id="triage">New issues to triage</h2>

      <p>These are issues we haven't looked at yet. We'll vet and label them properly soon. In the meantime, beware!</p> 

      <div class="row unlabeled-issues"></div>

      <p>No issues left? Feel free to check other lists, open new issues or check in on <a href="http://groups.google.com/group/cytoscape-app-dev">our developer forum</a>.</p>


      <hr />

      <h2 id="contributors">Contributors</h2>

      <p>This project was made possible by many contributors, including the following GitHub users:</p>

      <p class="well contributors"></p>

    </div>

    <footer>
      <p>
        Page powered by <a href="https://github.com/jywarren/community-toolbox"><i class="fa fa-github"></i></a>
        <a href="https://github.com/jywarren/community-toolbox">Commmunity Toolbox</a> 
        - Open Source
      </p>
    </footer>

    <script type="text/javascript">

      var toolbox;

      (function() {

        var org = urlHash().getUrlHashParameter('o') || 'cytoscape';
        var urlLabel = urlHash().getUrlHashParameter('l') || '"good first issue"'; // takes 'all', 'nolabel', or any actual label
    
        toolbox = CommunityToolbox(org, 'all');


      	  toolbox.getIssuesForOrg(org, { qs: { labels: urlLabel } })
                 .then(displayIssues('.good-first-issue'));

          toolbox.getIssuesForOrg(org, { qs: { labels: 'all' } })
                 .then(displayIssues('.all-issues'));

          toolbox.getIssuesForOrg(org, { qs: { labels: 'nolabel' } })
                 .then(displayIssues('.unlabeled-issues'));


        toolbox.getOrgContributors(org)
	  .then(function(repos){
		repos = JSON.parse(repos);
		for (i=0;i<repos.length;i++){
		      if(!repos[i].fork){
			  getRepoInfo(org,repos[i].name,repos[i].html_url);
		      }
		   }
	  });

	  function getRepoInfo(org,repo_name, repo_link){                          
		  toolbox.getOrgRepoContributors(org, repo_name)
                          .then(function(contributors) {
                                        contributors = JSON.parse(contributors);
					$('.contributors').append('<a href="' + repo_link + '"><h4>'+ repo_name + '</h4></a>');
                                        contributors.forEach(function(c){
                                               // $('.contributors').append(c.login + " ");
					        avatar = '<a href="https://github.com/' + c.login + '" title="' +  c.login + '"><img width="100px" src="' + c.avatar_url + '"></a>';
						$('.contributors').append(avatar);
                                  });
          });
	  }

        function displayIssues(selector) {
          return function displayIssues(issues) {
            if (typeof issues === "string") issues = JSON.parse(issues).items;
	    issues.forEach(function(issue) {
              toolbox.ui.insertIssue(issue, selector);
            });
	  }
        }

      })();

    </script>

  </body>

</html>
